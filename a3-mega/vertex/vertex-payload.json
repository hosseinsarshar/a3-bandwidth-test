{
  "displayName": "hossein_a3_mega_all_reduce_torch_run",
  "jobSpec": {
    "workerPoolSpecs": [
      {   
        "machineSpec": {
          "machineType": "a3-megagpu-8g",
          "acceleratorType": "NVIDIA_H100_MEGA_80GB",
          "acceleratorCount": 8
        },  
        "replicaCount": "1",
        "diskSpec": {
            "bootDiskType": "pd-ssd",
            "bootDiskSizeGb": 100
        },
        "containerSpec": {
          "imageUri": "us-east5-docker.pkg.dev/google.com/vertex-training-dlexamples/hosseins-a3-mega-training-repository/all-reduce-pytorch-24-05:v7",
          "command": [
              "sh", "-c"
          ],
          "args": [
            "./main.sh"
          ],
          "env": [
              {
                "name": "LD_LIBRARY_PATH",
                "value": "/usr/local/nvidia/lib64"
              }
          ]
        }
      },
      {
        "machineSpec": {
          "machineType": "a3-megagpu-8g",
          "acceleratorType": "NVIDIA_H100_MEGA_80GB",
          "acceleratorCount": 8
        },
        "replicaCount": "1",
        "diskSpec": {
            "bootDiskType": "pd-ssd",
            "bootDiskSizeGb": 100
        },
        "containerSpec": {
          "imageUri": "us-east5-docker.pkg.dev/google.com/vertex-training-dlexamples/hosseins-a3-mega-training-repository/all-reduce-pytorch-24-05:v7",
          "command": [
              "sh", "-c"
          ],
          "args": [
            "./main.sh"
          ],
          "env": [
              {
                "name": "LD_LIBRARY_PATH",
                "value": "/usr/local/nvidia/lib64"
              }
          ]
        }
      }
    ]
  }
}